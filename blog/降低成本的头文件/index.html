
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="zh-CN"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>降低成本的头文件 - 人間夜行</title>
  <meta name="author" content="人間夜行">

  
  <meta name="description" content="对于那个高精度计算觉得太复杂了，于是在下一版本不会使用。 于是直接开始写基本运算库了。虽然写的不太好，但也能用。 #ifndef __CALC_H__
#define __CALC_H__ //For all of the functions here: check before call. // &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://elephantus.moe/blog/%E9%99%8D%E4%BD%8E%E6%88%90%E6%9C%AC%E7%9A%84%E5%A4%B4%E6%96%87%E4%BB%B6">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="人間夜行" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.lug.ustc.edu.cn/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!-- Now disabled to boost loading speed in mainland China
<link href='https://fonts.lug.ustc.edu.cn/css?family=Noto+Serif:400,700' rel='stylesheet' type='text/css'>
<link href='https://fonts.lug.ustc.edu.cn/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
-->

<!--Google page ad
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-4233275739544541",
    enable_page_level_ads: true
  });
</script>
-->
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-27694942-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">人間夜行</a></h1>
  
    <h2>一切の有為の法　夢幻泡影の如し</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  
  
</ul>

<ul class="main-navigation">
  <li><a href="/">博客</a></li>
  <li><a href="/blog/archives/">所有文章</a></li>
  <li><a href="/work/">工作室</a></li>
  <li><a href="/history/">站点历史</a></li>
  <li><a href="/留言板/">留言板</a></li>
  <li><a href="/donate/">捐赠与致谢</a></li>
  <li><a href="/about/">关于</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">降低成本的头文件</h1>
    
    
      <p class="meta">
        








  



<time datetime="2011-06-30T00:00:00+08:00" pubdate data-updated="true">Jun 30th, 2011</time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="https://elephantus.moe">评论</a>
        
        
      </p>
    
  </header>


<div class="entry-content"><p>对于那个高精度计算觉得太复杂了，于是在下一版本不会使用。</p>

<p>于是直接开始写基本运算库了。虽然写的不太好，但也能用。</p>

<p>#ifndef __CALC_H__<br />
#define __CALC_H__<!--more--></p>

<p>//For all of the functions here: check before call.</p>

<p>//Get GCD. Avoid a==0||b==0.<br />
int gcd(int a, int b)<br />
{
int max,i;<br />
if(a&lt;0) a=-a;<br />
if(b&lt;0) b=-b;<br />
max=0;<br />
for(i=1;i&lt;=a;i++)<br />
{
if((a%i==0)&amp;&amp;(b%i==0)) max=i;<br />
}
return(max);<br />
}</p>

<p>//Reduction of a fraction. Output c,d.<br />
void rof(int *a, int *b, int *c, int *d)<br />
{
//Do nothing when *a==0.<br />
if (*a==0) {}<br />
else<br />
{
int x,y;<br />
x=*a;<br />
y=*b;<br />
*c=x/gcd(x,y);<br />
*d=y/gcd(x,y);<br />
if(*c&lt;0&amp;&amp;*d&lt;0)<br />
{
*c=-*c;<br />
*d=-*d;<br />
}
}<br />
}</p>

<p>//Sqrt in the form of a*root(b). Avoid b&lt;0. Output c,d.<br />
void finesqrt(int *a, int *b, int *c, int *d)<br />
{
if(*b==0)<br />
{
*c=0;<br />
*d=0;<br />
}
else<br />
{
int root,i,x,y;<br />
//a must be 1 when use this void.<br />
y=*b;<br />
for(i=1;i&lt;=y;i++)<br />
{
if(y%(i*i)==0) root=i;<br />
}
x=y/root/root;<br />
*c=root;<br />
*d=x;<br />
}
}</p>

<p>//Fraction add. Output e,f.<br />
void fracadd(int *a, int *b, int *c, int *d, int *e, int *f)<br />
{
int x,y,m,n;<br />
x=(*a)*(*d)+(*b)*(*c);<br />
y=(*b)*(*d);<br />
rof(&amp;x,&amp;y,&amp;m,&amp;n);<br />
*e=m;<br />
*f=n;<br />
}</p>

<p>//Fraction multiplication. Output e,f.<br />
void fracmul(int *a, int *b, int *c, int *d, int *e, int *f)<br />
{
int x,y,m,n;<br />
x=(*a)*(*c);<br />
y=(*b)*(*d);<br />
rof(&amp;x,&amp;y,&amp;m,&amp;n);<br />
*e=m;<br />
*f=n;<br />
}</p>

<p>#endif</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">作者 <span class="fn">人間夜行</span></span>

      








  



<time datetime="2011-06-30T00:00:00+08:00" pubdate data-updated="true">Jun 30th, 2011</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/ji-suan-ji-ji-zhu/'>计算机技术</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/%E7%BD%91%E4%B8%8A%E6%89%BE%E5%88%B0%E7%9A%84%E9%AB%98%E7%B2%BE%E5%BA%A6%E8%BF%90%E7%AE%97/" title="上一篇：网上找到的高精度运算">&laquo; 网上找到的高精度运算</a>
      
      
        <a class="basic-alignment right" href="/blog/solvequad-v0-2-%E5%8F%91%E5%B8%83/" title="下一篇：Solvequad v0.2 发布">Solvequad v0.2 发布 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>评论</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>


</div>

  <aside class="sidebar">
   
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <!-- original line is unavailable
    <input type="hidden" name="q" value="site:elephantus.moe" />
    -->
    <input type="hidden" name="sitesearch" value="elephantus.moe" />
    <input class="search" type="text" name="q" results="0" placeholder="搜索"/>
  </fieldset>
</form>
  
  
    <section>
    <h1>捐赠与致谢</h1>
    <a href="/donate/"><img src="https://o2guqap13.qnssl.com/donate_page.jpg" /></a>
</section>
<section>
  <h1>最新文章</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/linux-style-popup-window-for-goldendict-by-clicking-a-button-using-autohotkey/">使用 AutoHotkey 在 Windows 上实现 Goldendict 划词翻译</a>
      </li>
    
      <li class="post">
        <a href="/blog/%E7%9C%8B%E8%BF%87%E4%BA%BA%E7%B1%BB%E8%A1%B0%E9%80%80%E4%BB%A5%E5%90%8E/">看过人类衰退以后</a>
      </li>
    
      <li class="post">
        <a href="/blog/%E7%9C%8B%E8%BF%87%E4%BA%BA%E6%B8%A3%E7%9A%84%E6%9C%AC%E6%84%BF/">看过人渣的本愿</a>
      </li>
    
      <li class="post">
        <a href="/blog/%E7%8E%A9%E8%BF%87%E6%B0%B8%E6%81%92%E4%B9%8B%E5%A4%8F-%D0%B1%D0%B5%D1%81%D0%BA%D0%BE%D0%BD%D0%B5%D1%87%D0%BD%D0%BE%D0%B5-%D0%BB%D0%B5%D1%82%D0%BE/">玩过永恒之夏 Бесконечное лето</a>
      </li>
    
      <li class="post">
        <a href="/blog/export-goldendict-history-into-anki-deck/">导出 Goldendict 记录至 Anki Deck</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>文章分类</h1>
    <ul id="category-list"><li><a href='/blog/categories/acdai-ma/'>ac代码 (35)</a></li><li><a href='/blog/categories/ge-ren-ri-ji/'>个人日记 (76)</a></li><li><a href='/blog/categories/huan-xiang/'>幻想 (3)</a></li><li><a href='/blog/categories/wei-fen-lei/'>未分类 (9)</a></li><li><a href='/blog/categories/ji-suan-ji-ji-zhu/'>计算机技术 (54)</a></li><li><a href='/blog/categories/du-hou-gan/'>读后感 (24)</a></li><li><a href='/blog/categories/dou-ban-shou-cang/'>豆瓣收藏 (105)</a></li><li><a href='/blog/categories/zhuan-fa-ji-bei-wang/'>转发及备忘 (3)</a></li><li><a href='/blog/categories/bian-xue-bian-jiang/'>边学边讲 (8)</a></li></ul>
</section>
<section>
    <h1>推荐</h1>
    <p><a href="https://www.vultr.com/?ref=6858690"><img src="https://www.vultr.com/media/300x250_02.gif" width="300" height="250"><br />每月5美元，768MB内存，15GB SSD硬盘，千GB流量，含日本机房</a></p>
    <p><a href="https:&#x2F;&#x2F;www.namecheap.com&#x2F;?aff=96481"><img src="https:&#x2F;&#x2F;files.namecheap.com&#x2F;graphics&#x2F;linkus&#x2F;300x250-1.gif" width="300" height="250" border="0" alt="Namecheap.com"><br />多种低价域名，赠一年隐私保护</a></p>
</section>
<section>
    <h1>广告</h1>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- art -->
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-4233275739544541"
         data-ad-slot="2323760118"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</section>
<section>
    <h1>友情链接</h1>
    <ul>
        <li><a href="http://www.archlinuxcn.org/">Archlinux中文论坛</a></li>
        <li><a href="http://sfiction.blog.163.com/">灰然如此</a> 某同学之私人 Blog</li>
        <li><a href="http://gndrive.org/">高达数字实验室</a> Eric 的小站</li>
        <li><a href="http://www.gaomezi.com/">搞么子</a> 质量原创</li>
        <li><a href="http://forum.ubuntu.org.cn/">Ubuntu中文论坛</a></li>
        <li><a href="/about/">申请加入</a> 请联系我</li>
    </ul>
</section>

  
</aside>



    </div>
  </div>
  <footer role="contentinfo"><p>
  本站所有作品除非特殊说明均采用 <strong><a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/" rel="license">知识共享署名-非商业性使用-相同方式共享 3.0 中国大陆许可协议</a></strong> 进行许可。<br />
  Copyright &copy; 2011-2017 - 人間夜行 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'elephantus';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'https://elephantus.moe/blog/%E9%99%8D%E4%BD%8E%E6%88%90%E6%9C%AC%E7%9A%84%E5%A4%B4%E6%96%87%E4%BB%B6/';
        var disqus_url = 'https://elephantus.moe/blog/%E9%99%8D%E4%BD%8E%E6%88%90%E6%9C%AC%E7%9A%84%E5%A4%B4%E6%96%87%E4%BB%B6/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>









<script>
  $(document).ready(function() {  
  var stickyNavTop = $('nav').offset().top;  
    
  var stickyNav = function(){  
  var scrollTop = $(window).scrollTop();  
         
  if (scrollTop > stickyNavTop) {   
      $('nav').addClass('sticky');  
  } else {  
      $('nav').removeClass('sticky');   
  }  
  };  
    
  stickyNav();  
    
  $(window).scroll(function() {  
      stickyNav();  
  });  
  });  
</script>


</body>
</html>
