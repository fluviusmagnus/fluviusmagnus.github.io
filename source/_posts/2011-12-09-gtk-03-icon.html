---
layout: post
title: GTK+ 03 icon
categories:
- 边学边讲
tags:
- gtk
published: true
comments: true
---
<p>对应<a title="firstprograms" href="http://zetcode.com/tutorials/gtktutorial/chinese/firstprograms/" target="_blank">http://zetcode.com/tutorials/gtktutorial/chinese/firstprograms/</a></p>

<p><pre class="brush:c">#include &lt;gtk/gtk.h&gt;
//编译使用：gcc 文件名 `pkg-config --libs --cflags gtk+-2.0`
//所有注释仅为我的理解</pre></p>

<p>//实现对图片的访问。目前不甚理解。大概是读入缓冲。<br />
GdkPixbuf *create_pixbuf(const gchar * filename)<br />
{
	GdkPixbuf *pixbuf;<br />
	GError *error=NULL;<br />
	pixbuf=gdk_pixbuf_new_from_file(filename,&amp;error);<br />
	if(!pixbuf)<br />
	{<br />
		fprintf(stderr,&quot;%s\n&quot;,error-&gt;message);<br />
		g_error_free(error);<br />
	}<br />
	return pixbuf;<br />
}
int main( int argc, char *argv[])<br />
{
	GtkWidget *window;<br />
	gtk_init(&amp;argc, &amp;argv);<br />
	window = gtk_window_new(GTK_WINDOW_TOPLEVEL);<br />
	gtk_window_set_title(GTK_WINDOW(window),&quot;This is the TITLE&quot;);<br />
	gtk_window_set_default_size(GTK_WINDOW(window),400,300);<br />
	gtk_window_set_position(GTK_WINDOW(window),GTK_WIN_POS_CENTER);<br />
	//设置图标<br />
	gtk_window_set_icon(GTK_WINDOW(window),create_pixbuf(&quot;ra3.jpg&quot;));<br />
	gtk_widget_show(window);<br />
	g_signal_connect_swapped(G_OBJECT(window),&quot;destroy&quot;,G_CALLBACK(gtk_main_quit),NULL);<br />
	gtk_main();<br />
	return 0;<br />
}</p>
