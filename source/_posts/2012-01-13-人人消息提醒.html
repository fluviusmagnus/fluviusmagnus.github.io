---
layout: post
title: 人人消息提醒
categories:
- 计算机技术
tags:
- linux
- 人人
published: true
comments: true
---
<p>本人致力于服务人人网上的Linux用户。时值寒假初始，热烈奉送一款运行于终端的消息提醒器。</p>

<p>原理：wget读取cookie并登录手机人人，下载首页。grep分析有无新消息。终端响铃。</p>

<p>提醒：cookie的取得可以通过各种途径。一般情况下使用浏览器正常登录一次，再导出为cookies.txt即可。如果下载下来的页面很小，多试几次即可。如home.htm一直不正常，请检查你的cookie是否正确，保证url已经修改为可以正确登录首页的url。此外，请开启你的终端响铃。
<pre class="brush:bash">#!/bin/bash</pre></p>

<p># Renren Messages Notifier<br />
# 人人消息提醒<br />
# Koc Zhang: zszth@126.com<br />
# GPLv3 Licensed</p>

<p># 仅识别手机人人<br />
# 请在使用前自行修改首页url<br />
# 放置已成功登录过手机人人的cookies.txt至当前目录</p>

<p># url为自己登录后的首页<br />
# ！！！请自行修改！！！<br />
# 格式为http://http://3g.renren.com/home.do加上后面一长串<br />
url=""</p>

<p>note="新消息"<br />
mes=0<br />
while [ "1" = "1" ];<br />
do<br />
	wget -q --cookies=on --load-cookies=cookies.txt --keep-session-cookies --save-cookies=cookies.txt "$url" -O home.htm<br />
	mes=`cat home.htm¦grep -c "$note"`<br />
	if [ 1 = $mes ]; then<br />
		date<br />
		go=`cat home.htm¦grep -Eo '"http://3g.renren.com/news/home.do.{45}新消息&lt;'`<br />
		echo "$go"<br />
		echo -e "\a"<br />
		sleep 1<br />
		echo -e "\a"<br />
		sleep 1<br />
		echo -e "\a"<br />
		mes="0"<br />
	fi<br />
	sleep 60<br />
done
&nbsp;</p>
